<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <button mat-raised-button color="primary" (click)="goToProfile()">
      <mat-icon>person</mat-icon>
      Mi Perfil
    </button>
  </div>

  <div class="dashboard-grid">
    <!-- Resumen -->
    <mat-card class="summary-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>dashboard</mat-icon>
          Resumen
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (isLoading.summary) {
          <mat-spinner diameter="30"></mat-spinner>
        }
        @if (!isLoading.summary && summary) {
          <div class="summary-item">
            <span class="label">Total de usuarios:</span>
            <span class="value">{{ summary.totalUsers || 0 }}</span>
          </div>
          <div class="summary-item">
            <span class="label">Total de roles:</span>
            <span class="value">{{ summary.totalRoles || 0 }}</span>
          </div>
          <div class="summary-item">
            <span class="label">Total de suscripciones:</span>
            <span class="value">{{ summary.totalSubscriptions || 0 }}</span>
          </div>
        }
      </mat-card-content>
    </mat-card>

    <!-- Métricas -->
    <mat-card class="metrics-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>analytics</mat-icon>
          Métricas
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (isLoading.metrics) {
          <mat-spinner diameter="30"></mat-spinner>
        }
        @if (!isLoading.metrics && metrics) {
          <div class="metric-item">
            <span class="label">Métricas disponibles:</span>
            <span class="value">{{ metrics ? 'Cargadas' : 'No disponibles' }}</span>
          </div>
        }
      </mat-card-content>
    </mat-card>

    <!-- Actividades Recientes -->
    <mat-card class="recent-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>schedule</mat-icon>
          Actividades Recientes
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (isLoading.recent) {
          <mat-spinner diameter="30"></mat-spinner>
        }
        @if (!isLoading.recent && recent) {
        <div class="recent-content">
          <div class="no-data">
            Actividades recientes disponibles
          </div>
        </div>
        }
      </mat-card-content> </mat-card>

    <!-- Notificaciones -->
    <mat-card class="notifications-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>notifications</mat-icon>
          Notificaciones
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (isLoading.notifications) {
          <mat-spinner diameter="30"></mat-spinner>
        }
        @if (!isLoading.notifications) {
          @for (notification of notifications; track notification) {
            <div class="notification-item">
              <mat-icon color="primary" class="notification-icon">
                notifications
              </mat-icon>
              <div class="notification-details">
                <span class="notification-title">Notificación</span>
                <span class="notification-message">Notificación del sistema</span>
                <span class="notification-time">Hace un momento</span>
              </div>
            </div>
          }
          @if (notifications.length === 0) {
            No hay notificaciones
          }
        }
      </mat-card-content>
    </mat-card>
  </div>
</div>
